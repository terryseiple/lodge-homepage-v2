import { useState, useEffect } from 'react';
import { useLodgeData } from './hooks/useLodgeData';
import QuickLaunch from './components/QuickLaunch';

function App() {
  const [currentTime, setCurrentTime] = useState(new Date());
  const { boiler, weather } = useLodgeData();
  

  useEffect(() => {
    const timer = setInterval(() => setCurrentTime(new Date()), 1000);
    return () => clearInterval(timer);
  }, []);

  const timeString = currentTime.toLocaleTimeString('en-US', { 
    hour: '2-digit', minute: '2-digit', second: '2-digit'
  });

  const dateString = currentTime.toLocaleDateString('en-US', {
    weekday: 'long', month: 'long', day: 'numeric', year: 'numeric'
  });

  return (
    <div className="min-h-screen bg-bison-dark text-white p-8">
      <div className="bg-gradient-to-r from-bison-green to-bison-yellow rounded-2xl p-12 mb-8 shadow-bison text-center relative overflow-hidden">
        <div className="absolute top-4 left-4 text-6xl opacity-20 animate-bounce-slow">ğŸŒ¾</div>
        <div className="absolute top-4 right-4 text-6xl opacity-20 animate-bounce-slow" style={{animationDelay: '0.5s'}}>ğŸŒ¾</div>
        <div className="absolute bottom-4 left-1/4 text-5xl opacity-15">ğŸŒ¾</div>
        <div className="absolute bottom-4 right-1/4 text-5xl opacity-15" style={{animationDelay: '0.3s'}}>ğŸŒ¾</div>
        
        <h1 className="text-8xl font-black tracking-[0.3em] text-bison-dark drop-shadow-2xl funky-font mb-4">
          HORNS UP ğŸ¦¬
        </h1>
        <div className="text-3xl mt-2 text-bison-dark opacity-90 font-bold">The Lodge Command Center</div>
      </div>

      <div className="bg-bison-card rounded-xl p-8 mb-8 text-center border-2 border-bison-yellow">
        <div className="text-6xl font-bold text-bison-yellow mb-2 font-mono">{timeString}</div>
        <div className="text-xl text-gray-400">{dateString}</div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div className={`bg-bison-card rounded-xl p-6 border-2 ${boiler.available ? 'border-green-500' : 'border-red-500'}`}>
          <div className="text-sm text-gray-400 mb-2">ğŸ”¥ Boiler Temperature</div>
          {boiler.available ? (
            <>
              <div className="text-4xl font-bold text-bison-yellow">
                {boiler.temperature ? `${boiler.temperature}Â°F` : '--'}
              </div>
              {boiler.status && (
                <div className={`text-sm mt-2 ${boiler.status === 'running' ? 'text-green-500' : 'text-gray-400'}`}>
                  Status: {boiler.status}
                </div>
              )}
            </>
          ) : (<div className="text-xl text-gray-500">Connecting to HA...</div>)}
        </div>

        <div className={`bg-bison-card rounded-xl p-6 border-2 ${weather.available ? 'border-blue-500' : 'border-red-500'}`}>
          <div className="text-sm text-gray-400 mb-2">ğŸŒ¡ï¸ Outside Temperature</div>
          {weather.available ? (
            <>
              <div className="text-4xl font-bold text-bison-green">
                {weather.temperature ? `${weather.temperature}Â°F` : '--'}
              </div>
              {weather.conditions && (
                <div className="text-sm text-gray-400 mt-2">{weather.conditions}</div>
              )}
            </>
          ) : (<div className="text-xl text-gray-500">Loading weather...</div>)}
        </div>

        <div className="bg-bison-card rounded-xl p-6 border-2 border-bison-yellow">
          <div className="text-sm text-gray-400 mb-2">ğŸ”Œ System Status</div>
          <div className="flex flex-col gap-2 text-sm">
            <div className="flex items-center gap-2">
              <span className={`w-3 h-3 rounded-full ${boiler.connected ? 'bg-green-500' : 'bg-red-500'}`}></span>
              <span>HA {boiler.connected ? 'Connected' : 'Disconnected'}</span>
            </div>
            <div className="flex items-center gap-2">
              <span className={`w-3 h-3 rounded-full ${boiler.available ? 'bg-green-500' : 'bg-yellow-500'}`}></span>
              <span>Boiler {boiler.available ? 'Available' : 'Unavailable'}</span>
            </div>
            <div className="flex items-center gap-2">
              <span className={`w-3 h-3 rounded-full ${weather.available ? 'bg-green-500' : 'bg-yellow-500'}`}></span>
              <span>Weather {weather.available ? 'Available' : 'Unavailable'}</span>
            </div>
          </div>
        </div>
      </div>

      <QuickLaunch />

      <div className="text-center text-gray-500 text-sm mt-8">
        <div className="mb-2">ğŸ¦¬ Go Bison! ğŸ¦¬</div>
        <div>The Lodge â€¢ Powered by NDSU Spirit</div>
      </div>
    </div>
  );
}

export default App;
